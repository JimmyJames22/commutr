{"ast":null,"code":"import { forwardRef, useRef, createElement, useContext, useEffect, useCallback, useMemo, Fragment, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\nimport { createNamedContext } from '@reach/utils/context';\nimport { isFunction } from '@reach/utils/type-check';\nimport { makeId } from '@reach/utils/make-id';\nimport { noop } from '@reach/utils/noop';\nimport { useCheckStyles } from '@reach/utils/dev-utils';\nimport { useComposedRefs } from '@reach/utils/compose-refs';\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\nimport { useStatefulRefValue } from '@reach/utils/use-stateful-ref-value';\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\nimport { useId } from '@reach/auto-id';\nimport { Popover, positionMatchWidth } from '@reach/popover';\nimport warning from 'tiny-warning';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n} // Forked from https://github.com/bvaughn/highlight-words-core\n\n/**\n * Creates an array of chunk objects representing both higlightable and non\n * highlightable pieces of text that match each search word.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction findAll(_ref) {\n  var autoEscape = _ref.autoEscape,\n      _ref$caseSensitive = _ref.caseSensitive,\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n      _ref$findChunks = _ref.findChunks,\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\n      sanitize = _ref.sanitize,\n      searchWords = _ref.searchWords,\n      textToHighlight = _ref.textToHighlight;\n  return fillInChunks({\n    chunksToHighlight: combineChunks({\n      chunks: findChunks({\n        autoEscape: autoEscape,\n        caseSensitive: caseSensitive,\n        sanitize: sanitize,\n        searchWords: searchWords,\n        textToHighlight: textToHighlight\n      })\n    }),\n    totalLength: textToHighlight ? textToHighlight.length : 0\n  });\n}\n/**\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\n * single chunks.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction combineChunks(_ref2) {\n  var chunks = _ref2.chunks;\n  return chunks.sort(function (first, second) {\n    return first.start - second.start;\n  }).reduce(function (processedChunks, nextChunk) {\n    // First chunk just goes straight in the array...\n    if (processedChunks.length === 0) {\n      return [nextChunk];\n    } else {\n      // ... subsequent chunks get checked to see if they overlap...\n      var prevChunk = processedChunks.pop();\n\n      if (nextChunk.start <= prevChunk.end) {\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n        // largest of the end indeces.\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n        processedChunks.push({\n          highlight: false,\n          start: prevChunk.start,\n          end: endIndex\n        });\n      } else {\n        processedChunks.push(prevChunk, nextChunk);\n      }\n\n      return processedChunks;\n    }\n  }, []);\n}\n/**\n * Examine text for any matches. If we find matches, add them to the returned\n * array as a \"chunk\" object.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction defaultFindChunks(_ref3) {\n  var autoEscape = _ref3.autoEscape,\n      caseSensitive = _ref3.caseSensitive,\n      _ref3$sanitize = _ref3.sanitize,\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\n      searchWords = _ref3.searchWords,\n      textToHighlight = _ref3.textToHighlight;\n  textToHighlight = sanitize(textToHighlight || \"\");\n  return searchWords.filter(function (searchWord) {\n    return searchWord;\n  }) // Remove empty words\n  .reduce(function (chunks, searchWord) {\n    searchWord = sanitize(searchWord);\n\n    if (autoEscape) {\n      searchWord = escapeRegExpFn(searchWord);\n    }\n\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\n    var match;\n\n    while (match = regex.exec(textToHighlight || \"\")) {\n      var start = match.index;\n      var end = regex.lastIndex; // We do not return zero-length matches\n\n      if (end > start) {\n        chunks.push({\n          highlight: false,\n          start: start,\n          end: end\n        });\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\n\n      if (match.index === regex.lastIndex) {\n        regex.lastIndex++;\n      }\n    }\n\n    return chunks;\n  }, []);\n}\n/**\n * Given a set of chunks to highlight, create an additional set of chunks\n * to represent the bits of text between the highlighted text.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction fillInChunks(_ref4) {\n  var chunksToHighlight = _ref4.chunksToHighlight,\n      totalLength = _ref4.totalLength;\n  var allChunks = [];\n\n  if (chunksToHighlight.length === 0) {\n    append(0, totalLength, false);\n  } else {\n    var lastIndex = 0;\n    chunksToHighlight.forEach(function (chunk) {\n      append(lastIndex, chunk.start, false);\n      append(chunk.start, chunk.end, true);\n      lastIndex = chunk.end;\n    });\n    append(lastIndex, totalLength, false);\n  }\n\n  return allChunks;\n\n  function append(start, end, highlight) {\n    if (end - start > 0) {\n      allChunks.push({\n        start: start,\n        end: end,\n        highlight: highlight\n      });\n    }\n  }\n}\n\nfunction defaultSanitize(string) {\n  return string;\n}\n\nfunction escapeRegExpFn(string) {\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\nvar HighlightWords = {\n  combineChunks: combineChunks,\n  fillInChunks: fillInChunks,\n  findAll: findAll,\n  findChunks: defaultFindChunks\n};\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\n    _excluded4 = [\"persistSelection\", \"as\"],\n    _excluded5 = [\"as\", \"children\", \"index\", \"value\", \"onClick\"],\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\n\nvar _on, _on2, _on3, _on4, _states; // States\n// Nothing going on, waiting for the user to type or use the arrow keys\n\n\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\n\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\n\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\n// are not ComboboxInputs\n\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\n// Events\n// User cleared the value w/ backspace, but input still has focus\n\nvar CLEAR = \"CLEAR\"; // User is typing\n\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\n// Prevents initial change from sending the user to the NAVIGATING state\n// https://github.com/reach/reach-ui/issues/464\n\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\n\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\n// value from the click, not the current nav item\n\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\n\nvar ESCAPE = \"ESCAPE\";\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\n\nvar INTERACT = \"INTERACT\";\nvar FOCUS = \"FOCUS\";\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar stateChart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\n  }, _states[SUGGESTING] = {\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\n  }, _states[NAVIGATING] = {\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\n  }, _states[INTERACTING] = {\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\n  }, _states)\n};\n\nvar reducer = function reducer(data, event) {\n  var nextState = _extends({}, data, {\n    lastEventType: event.type\n  });\n\n  switch (event.type) {\n    case CHANGE:\n    case INITIAL_CHANGE:\n      return _extends({}, nextState, {\n        navigationValue: null,\n        value: event.value\n      });\n\n    case NAVIGATE:\n    case OPEN_WITH_BUTTON:\n    case OPEN_WITH_INPUT_CLICK:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    case CLEAR:\n      return _extends({}, nextState, {\n        value: \"\",\n        navigationValue: null\n      });\n\n    case BLUR:\n    case ESCAPE:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case SELECT_WITH_CLICK:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : event.value,\n        navigationValue: null\n      });\n\n    case SELECT_WITH_KEYBOARD:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : data.navigationValue,\n        navigationValue: null\n      });\n\n    case CLOSE_WITH_BUTTON:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case INTERACT:\n      return nextState;\n\n    case FOCUS:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    default:\n      return nextState;\n  }\n};\n\nfunction popoverIsExpanded(state) {\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\n}\n/**\n * When we open a list, set the navigation value to the value in the input, if\n * it's in the list, then it'll automatically be highlighted.\n *\n * @param stateData\n * @param event\n */\n\n\nfunction findNavigationValue(stateData, event) {\n  // @ts-ignore\n  if (event.value) {\n    // @ts-ignore\n    return event.value; // @ts-ignore\n  } else if (event.persistSelection) {\n    return stateData.value;\n  } else {\n    return null;\n  }\n}\n\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\n// can work it's highlight text magic no matter what else is rendered around\n// it.\n\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Combobox\n *\n * @see Docs https://reach.tech/combobox#combobox\n */\n\nvar Combobox = /*#__PURE__*/forwardRef(function (_ref, forwardedRef) {\n  var _data$navigationValue;\n\n  var onSelect = _ref.onSelect,\n      _ref$openOnFocus = _ref.openOnFocus,\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\n      ariaLabel = _ref[\"aria-label\"],\n      ariaLabelledby = _ref[\"aria-labelledby\"],\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useDescendantsInit = useDescendantsInit(),\n      options = _useDescendantsInit[0],\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\n\n\n  var inputRef = useRef();\n  var popoverRef = useRef();\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\n  // the user's value while navigating (because it's always the user's value),\n  // but we need to know this in useKeyDown which is far away from the prop\n  // here, so we do something sneaky and write it to this ref on context so we\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\n  // about this one too!\n\n  var autocompletePropRef = useRef(false);\n  var persistSelectionRef = useRef(false);\n  var defaultData = {\n    // The value the user has typed. We derive this also when the developer is\n    // controlling the value of ComboboxInput.\n    value: \"\",\n    // the value the user has navigated to with the keyboard\n    navigationValue: null\n  };\n\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\n      state = _useReducerMachine[0],\n      data = _useReducerMachine[1],\n      transition = _useReducerMachine[2];\n\n  useFocusManagement(data.lastEventType, inputRef);\n  var id = useId(props.id);\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\n  var isControlledRef = useRef(false);\n  var isExpanded = popoverIsExpanded(state);\n  var context = {\n    ariaLabel: ariaLabel,\n    ariaLabelledby: ariaLabelledby,\n    autocompletePropRef: autocompletePropRef,\n    buttonRef: buttonRef,\n    comboboxId: id,\n    data: data,\n    inputRef: inputRef,\n    isExpanded: isExpanded,\n    listboxId: listboxId,\n    onSelect: onSelect || noop,\n    openOnFocus: openOnFocus,\n    persistSelectionRef: persistSelectionRef,\n    popoverRef: popoverRef,\n    state: state,\n    transition: transition,\n    isControlledRef: isControlledRef\n  };\n  useCheckStyles(\"combobox\");\n  return /*#__PURE__*/createElement(DescendantProvider, {\n    context: ComboboxDescendantContext,\n    items: options,\n    set: setOptions\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\n    value: context\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\n    \"data-reach-combobox\": \"\",\n    \"data-state\": getDataState(state),\n    \"data-expanded\": isExpanded || undefined,\n    ref: forwardedRef\n  }), isFunction(children) ? children({\n    id: id,\n    isExpanded: isExpanded,\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\n    state: state\n  }) : children)));\n});\n/**\n * @see Docs https://reach.tech/combobox#combobox-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  Combobox.displayName = \"Combobox\";\n  Combobox.propTypes = {\n    as: PropTypes.any,\n    onSelect: PropTypes.func,\n    openOnFocus: PropTypes.bool\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxInput\n *\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxinput\n */\n\n\nvar ComboboxInput = /*#__PURE__*/forwardRef(function (_ref2, forwardedRef) {\n  var _ref2$as = _ref2.as,\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\n      _ref2$selectOnClick = _ref2.selectOnClick,\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\n      _ref2$autocomplete = _ref2.autocomplete,\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\n      onClick = _ref2.onClick,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onBlur = _ref2.onBlur,\n      onFocus = _ref2.onFocus,\n      controlledValue = _ref2.value,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2); // https://github.com/reach/reach-ui/issues/464\n\n\n  var _React$useRef = useRef(controlledValue),\n      initialControlledValue = _React$useRef.current;\n\n  var controlledValueChangedRef = useRef(false);\n  useUpdateEffect(function () {\n    controlledValueChangedRef.current = true;\n  }, [controlledValue]);\n\n  var _React$useContext = useContext(ComboboxContext),\n      _React$useContext$dat = _React$useContext.data,\n      navigationValue = _React$useContext$dat.navigationValue,\n      value = _React$useContext$dat.value,\n      lastEventType = _React$useContext$dat.lastEventType,\n      inputRef = _React$useContext.inputRef,\n      state = _React$useContext.state,\n      transition = _React$useContext.transition,\n      listboxId = _React$useContext.listboxId,\n      autocompletePropRef = _React$useContext.autocompletePropRef,\n      openOnFocus = _React$useContext.openOnFocus,\n      isExpanded = _React$useContext.isExpanded,\n      ariaLabel = _React$useContext.ariaLabel,\n      ariaLabelledby = _React$useContext.ariaLabelledby,\n      persistSelectionRef = _React$useContext.persistSelectionRef,\n      isControlledRef = _React$useContext.isControlledRef;\n\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\n  // caused by clicking inside the list, and if so, don't close the List.\n\n  var selectOnClickRef = useRef(false);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var isControlled = typeof controlledValue !== \"undefined\";\n  var wasInitiallyControlled = typeof initialControlledValue !== \"undefined\";\n\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? warning(!(!isControlled && wasInitiallyControlled), \"ComboboxInput is changing from controlled to uncontrolled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(isControlled && !wasInitiallyControlled), \"ComboboxInput is changing from uncontrolled to controlled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n  }\n\n  useEffect(function () {\n    isControlledRef.current = isControlled; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isControlled]); // Layout effect should be SSR-safe here because we don't actually do\n  // anything with this ref that involves rendering until after we've\n  // let the client hydrate in nested components.\n\n  useIsomorphicLayoutEffect(function () {\n    autocompletePropRef.current = autocomplete;\n  }, [autocomplete, autocompletePropRef]);\n  var handleValueChange = useCallback(function (value) {\n    if (value.trim() === \"\") {\n      transition(CLEAR, {\n        isControlled: isControlled\n      });\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\n      transition(INITIAL_CHANGE, {\n        value: value\n      });\n    } else {\n      transition(CHANGE, {\n        value: value\n      });\n    }\n  }, [initialControlledValue, transition, isControlled]);\n  useEffect(function () {\n    // If they are controlling the value we still need to do our transitions,\n    // so  we have this derived state to emulate onChange of the input as we\n    // receive new `value`s ...[*]\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\n      handleValueChange(controlledValue);\n    }\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\n  // user types, instead the developer controls it with the normal input\n  // onChange prop\n\n  function handleChange(event) {\n    var value = event.target.value;\n\n    if (!isControlled) {\n      handleValueChange(value);\n    }\n  }\n\n  function handleFocus() {\n    if (selectOnClick) {\n      selectOnClickRef.current = true;\n    } // If we select an option with click, useFocusManagement will focus the\n    // input, in those cases we don't want to cause the menu to open back up,\n    // so we guard behind these states.\n\n\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\n      transition(FOCUS, {\n        persistSelection: persistSelectionRef.current\n      });\n    }\n  }\n\n  function handleClick() {\n    if (selectOnClickRef.current) {\n      var _inputRef$current;\n\n      selectOnClickRef.current = false;\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\n    }\n\n    if (openOnFocus && state === IDLE) {\n      transition(OPEN_WITH_INPUT_CLICK);\n    }\n  }\n\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\n  navigationValue || controlledValue || value : controlledValue || value;\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\n    \"aria-autocomplete\": \"both\",\n    \"aria-controls\": listboxId,\n    \"aria-expanded\": isExpanded,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\n    role: \"combobox\"\n  }, props, {\n    \"data-reach-combobox-input\": \"\",\n    \"data-state\": getDataState(state),\n    ref: ref,\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    onChange: composeEventHandlers(onChange, handleChange),\n    onClick: composeEventHandlers(onClick, handleClick),\n    onFocus: composeEventHandlers(onFocus, handleFocus),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    value: inputValue || \"\"\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxinput-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxInput.displayName = \"ComboboxInput\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxPopover\n *\n * Contains the popup that renders the list. Because some UI needs to render\n * more than the list in the popup, you need to render one of these around the\n * list. For example, maybe you want to render the number of results suggested.\n *\n * @see Docs https://reach.tech/combobox#comboboxpopover\n */\n\n\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function (_ref3, forwardedRef) {\n  var _ref3$as = _ref3.as,\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\n      children = _ref3.children,\n      _ref3$portal = _ref3.portal,\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\n      onKeyDown = _ref3.onKeyDown,\n      onBlur = _ref3.onBlur,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  var _React$useContext2 = useContext(ComboboxContext),\n      popoverRef = _React$useContext2.popoverRef,\n      inputRef = _React$useContext2.inputRef,\n      isExpanded = _React$useContext2.isExpanded,\n      state = _React$useContext2.state;\n\n  var ref = useComposedRefs(popoverRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var sharedProps = {\n    \"data-reach-combobox-popover\": \"\",\n    \"data-state\": getDataState(state),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    // Instead of conditionally rendering the popover we use the `hidden` prop\n    // because we don't want to unmount on close (from escape or onSelect).\n    // However, the developer can conditionally render the ComboboxPopover if\n    // they do want to cause mount/unmount based on the app's own data (like\n    // results.length or whatever).\n    hidden: !isExpanded,\n    tabIndex: -1,\n    children: children\n  };\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\n    as: Comp\n  }, props, {\n    ref: ref,\n    \"data-expanded\": isExpanded || undefined,\n    position: position,\n    targetRef: inputRef,\n    unstable_skipInitialPortalRender: true\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\n    ref: ref\n  }, props, sharedProps));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxPopover.displayName = \"ComboboxPopover\";\n}\n/**\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\n */\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxList\n *\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\n * for the list.\n *\n * @see Docs https://reach.tech/combobox#comboboxlist\n */\n\n\nvar ComboboxList = /*#__PURE__*/forwardRef(function (_ref4, forwardedRef) {\n  var _ref4$persistSelectio = _ref4.persistSelection,\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\n      _ref4$as = _ref4.as,\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\n\n  var _React$useContext3 = useContext(ComboboxContext),\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\n      listboxId = _React$useContext3.listboxId;\n\n  if (persistSelection) {\n    persistSelectionRef.current = true;\n  }\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    role: \"listbox\"\n  }, props, {\n    ref: forwardedRef,\n    \"data-reach-combobox-list\": \"\",\n    id: listboxId\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxlist-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxList.displayName = \"ComboboxList\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOption\n *\n * An option that is suggested to the user as they interact with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxoption\n */\n\n\nvar ComboboxOption = /*#__PURE__*/forwardRef(function (_ref5, forwardedRef) {\n  var _ref5$as = _ref5.as,\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\n      children = _ref5.children,\n      indexProp = _ref5.index,\n      value = _ref5.value,\n      onClick = _ref5.onClick,\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\n\n  var _React$useContext4 = useContext(ComboboxContext),\n      onSelect = _React$useContext4.onSelect,\n      navigationValue = _React$useContext4.data.navigationValue,\n      transition = _React$useContext4.transition,\n      isControlledRef = _React$useContext4.isControlledRef;\n\n  var ownRef = useRef(null);\n\n  var _useStatefulRefValue = useStatefulRefValue(ownRef, null),\n      element = _useStatefulRefValue[0],\n      handleRefSet = _useStatefulRefValue[1];\n\n  var descendant = useMemo(function () {\n    return {\n      element: element,\n      value: value\n    };\n  }, [value, element]);\n  var index = useDescendant(descendant, ComboboxDescendantContext, indexProp);\n  var ref = useComposedRefs(forwardedRef, handleRefSet);\n  var isActive = navigationValue === value;\n\n  var handleClick = function handleClick() {\n    onSelect && onSelect(value);\n    transition(SELECT_WITH_CLICK, {\n      value: value,\n      isControlled: isControlledRef.current\n    });\n  };\n\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\n    value: {\n      value: value,\n      index: index\n    }\n  }, /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-selected\": isActive,\n    role: \"option\"\n  }, props, {\n    \"data-reach-combobox-option\": \"\",\n    ref: ref,\n    id: String(makeHash(value)),\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\n    // element can be `document.activeElement` and then our focus checks in\n    // onBlur will work as intended\n    ,\n    tabIndex: -1,\n    onClick: composeEventHandlers(onClick, handleClick)\n  }), children ? isFunction(children) ? children({\n    value: value,\n    index: index\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxoption-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOption.displayName = \"ComboboxOption\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOptionText\n *\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\n * matching and non-matching segments of text.\n *\n * We don't forwardRef or spread props because we render multiple spans or null,\n * should be fine 🤙\n *\n * @example\n *   <ComboboxOption value=\"Seattle\">\n *     🌧 <ComboboxOptionText />\n *   </ComboboxOption>\n *\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\n */\n\n\nfunction ComboboxOptionText() {\n  var _React$useContext5 = useContext(OptionContext),\n      value = _React$useContext5.value;\n\n  var _React$useContext6 = useContext(ComboboxContext),\n      contextValue = _React$useContext6.data.value;\n\n  var results = useMemo(function () {\n    return HighlightWords.findAll({\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\n      textToHighlight: value\n    });\n  }, [contextValue, value]);\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\n    var str = value.slice(result.start, result.end);\n    return /*#__PURE__*/createElement(\"span\", {\n      key: index,\n      \"data-reach-combobox-option-text\": \"\",\n      \"data-user-value\": result.highlight ? true : undefined,\n      \"data-suggested-value\": result.highlight ? undefined : true\n    }, str);\n  }) : value);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxButton\n */\n\n\nvar ComboboxButton = /*#__PURE__*/forwardRef(function (_ref6, forwardedRef) {\n  var _ref6$as = _ref6.as,\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\n      onClick = _ref6.onClick,\n      onKeyDown = _ref6.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\n\n  var _React$useContext7 = useContext(ComboboxContext),\n      transition = _React$useContext7.transition,\n      state = _React$useContext7.state,\n      buttonRef = _React$useContext7.buttonRef,\n      listboxId = _React$useContext7.listboxId,\n      isExpanded = _React$useContext7.isExpanded;\n\n  var ref = useComposedRefs(buttonRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n\n  var handleClick = function handleClick() {\n    if (state === IDLE) {\n      transition(OPEN_WITH_BUTTON);\n    } else {\n      transition(CLOSE_WITH_BUTTON);\n    }\n  };\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-controls\": listboxId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-expanded\": isExpanded\n  }, props, {\n    \"data-reach-combobox-button\": \"\",\n    ref: ref,\n    onClick: composeEventHandlers(onClick, handleClick),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\n  }));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxButton.displayName = \"ComboboxButton\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Move focus back to the input if we start navigating w/ the\n * keyboard after focus has moved to any focusable content in\n * the popup.\n *\n * @param lastEventType\n * @param inputRef\n */\n\n\nfunction useFocusManagement(lastEventType, inputRef) {\n  // useLayoutEffect so that the cursor goes to the end of the input instead\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\n  //\n  // Should be safe to use here since we're just focusing an input.\n  useIsomorphicLayoutEffect(function () {\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\n    }\n  }, [inputRef, lastEventType]);\n}\n/**\n * We want the same events when the input or the popup have focus (HOW COOL ARE\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\n */\n\n\nfunction useKeyDown() {\n  var _React$useContext8 = useContext(ComboboxContext),\n      navigationValue = _React$useContext8.data.navigationValue,\n      onSelect = _React$useContext8.onSelect,\n      state = _React$useContext8.state,\n      transition = _React$useContext8.transition,\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\n      persistSelectionRef = _React$useContext8.persistSelectionRef,\n      isControlledRef = _React$useContext8.isControlledRef;\n\n  var options = useDescendants(ComboboxDescendantContext);\n  return function handleKeyDown(event) {\n    var index = options.findIndex(function (_ref7) {\n      var value = _ref7.value;\n      return value === navigationValue;\n    });\n\n    function getNextOption() {\n      var atBottom = index === options.length - 1;\n\n      if (atBottom) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getFirstOption();\n        }\n      } else {\n        // Go to the next item in the list\n        return options[(index + 1) % options.length];\n      }\n    }\n\n    function getPreviousOption() {\n      var atTop = index === 0;\n\n      if (atTop) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getLastOption();\n        }\n      } else if (index === -1) {\n        // displaying the user's value, so go select the last one\n        return getLastOption();\n      } else {\n        // normal case, select previous\n        return options[(index - 1 + options.length) % options.length];\n      }\n    }\n\n    function getFirstOption() {\n      return options[0];\n    }\n\n    function getLastOption() {\n      return options[options.length - 1];\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || !options.length) {\n          return;\n        }\n\n        if (state === IDLE) {\n          // Opening a closed list\n          transition(NAVIGATE, {\n            persistSelection: persistSelectionRef.current\n          });\n        } else {\n          var next = getNextOption();\n          transition(NAVIGATE, {\n            value: next ? next.value : null\n          });\n        }\n\n        break;\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\n\n      case \"ArrowUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          var prev = getPreviousOption();\n          transition(NAVIGATE, {\n            value: prev ? prev.value : null\n          });\n        }\n\n        break;\n\n      case \"Home\":\n      case \"PageUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getFirstOption().value\n          });\n        }\n\n        break;\n\n      case \"End\":\n      case \"PageDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getLastOption().value\n          });\n        }\n\n        break;\n\n      case \"Escape\":\n        if (state !== IDLE) {\n          transition(ESCAPE);\n        }\n\n        break;\n\n      case \"Enter\":\n        if (state === NAVIGATING && navigationValue !== null) {\n          // don't want to submit forms\n          event.preventDefault();\n          onSelect && onSelect(navigationValue);\n          transition(SELECT_WITH_KEYBOARD, {\n            isControlled: isControlledRef.current\n          });\n        }\n\n        break;\n    }\n  };\n}\n\nfunction useBlur() {\n  var _React$useContext9 = useContext(ComboboxContext),\n      state = _React$useContext9.state,\n      transition = _React$useContext9.transition,\n      popoverRef = _React$useContext9.popoverRef,\n      inputRef = _React$useContext9.inputRef,\n      buttonRef = _React$useContext9.buttonRef;\n\n  return function handleBlur(event) {\n    var popover = popoverRef.current;\n    var input = inputRef.current;\n    var button = buttonRef.current;\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\n\n    if (activeElement !== input && activeElement !== button && popover) {\n      if (popover.contains(activeElement)) {\n        // focus landed inside the combobox, keep it open\n        if (state !== INTERACTING) {\n          transition(INTERACT);\n        }\n      } else {\n        // focus landed outside the combobox, close it.\n        transition(BLUR);\n      }\n    }\n  };\n}\n/**\n * This manages transitions between states with a built in reducer to manage\n * the data that goes with those transitions.\n *\n * @param chart\n * @param reducer\n * @param initialData\n */\n\n\nfunction useReducerMachine(chart, reducer, initialData) {\n  var _React$useState = useState(chart.initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var _React$useReducer = useReducer(reducer, initialData),\n      data = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var transition = function transition(event, payload) {\n    if (payload === void 0) {\n      payload = {};\n    }\n\n    var currentState = chart.states[state];\n    var nextState = currentState && currentState.on[event];\n\n    if (nextState) {\n      dispatch(_extends({\n        type: event,\n        state: state,\n        nextState: state\n      }, payload));\n      setState(nextState);\n      return;\n    }\n  };\n\n  return [state, data, transition];\n}\n/**\n * We don't want to track the active descendant with indexes because nothing is\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\n * ENTER. That only happens if you use the index as your data, rather than\n * *your data as your data*. We use this to generate a unique ID based on the\n * value of each item.  This function is short, sweet, and good enough™ (I also\n * don't know how it works, tbqh)\n *\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\n * @param str\n */\n\n\nfunction makeHash(str) {\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash = hash & hash;\n  }\n\n  return hash;\n} // function getActiveElement(node: Element | null | undefined) {\n//   let activeElement: Element | null = null;\n//   try {\n//     // If Element.getRootNode is supported, we'll retrieve either the root\n//     // Document or shadow root depending on where the component is rendered.\n//     // https://github.com/reach/reach-ui/issues/787\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\n//       .activeElement;\n//   } finally {\n//     return activeElement || (node?.ownerDocument || document).activeElement;\n//   }\n// }\n\n\nfunction getDataState(state) {\n  return state.toLowerCase();\n}\n/**\n * Escape regexp special characters in `str`\n *\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\n * @param str\n */\n\n\nfunction escapeRegexp(str) {\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\n} //////////////////////////\n//////////////////////////////////////////////////////\n\n/**\n * A hook that exposes data for a given `Combobox` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\n\nfunction useComboboxContext() {\n  var _React$useContext10 = useContext(ComboboxContext),\n      isExpanded = _React$useContext10.isExpanded,\n      comboboxId = _React$useContext10.comboboxId,\n      data = _React$useContext10.data,\n      state = _React$useContext10.state;\n\n  var navigationValue = data.navigationValue;\n  return useMemo(function () {\n    return {\n      id: comboboxId,\n      isExpanded: isExpanded,\n      navigationValue: navigationValue != null ? navigationValue : null,\n      state: state\n    };\n  }, [comboboxId, isExpanded, navigationValue, state]);\n}\n/**\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\n\nfunction useComboboxOptionContext() {\n  var _React$useContext11 = useContext(OptionContext),\n      value = _React$useContext11.value,\n      index = _React$useContext11.index;\n\n  return useMemo(function () {\n    return {\n      value: value,\n      index: index\n    };\n  }, [value, index]);\n} ////////////////////////////////////////////////////////////////////////////////\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\n// what the heck?). Have a great day :D\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\n\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useKeyDown as unstable_useKeyDown, useComboboxContext, useComboboxOptionContext };","map":{"version":3,"sources":["/Users/gunner/Documents/GitHub/commutr-main/commutr/frontend/node_modules/@reach/combobox/dist/reach-combobox.esm.js"],"names":["forwardRef","useRef","createElement","useContext","useEffect","useCallback","useMemo","Fragment","useState","useReducer","PropTypes","useIsomorphicLayoutEffect","createNamedContext","isFunction","makeId","noop","useCheckStyles","useComposedRefs","useUpdateEffect","useStatefulRefValue","composeEventHandlers","createDescendantContext","useDescendantsInit","DescendantProvider","useDescendant","useDescendants","useId","Popover","positionMatchWidth","warning","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","findAll","_ref","autoEscape","_ref$caseSensitive","caseSensitive","_ref$findChunks","findChunks","defaultFindChunks","sanitize","searchWords","textToHighlight","fillInChunks","chunksToHighlight","combineChunks","chunks","totalLength","_ref2","sort","first","second","start","reduce","processedChunks","nextChunk","prevChunk","pop","end","endIndex","Math","max","push","highlight","_ref3","_ref3$sanitize","defaultSanitize","filter","searchWord","escapeRegExpFn","regex","RegExp","match","exec","index","lastIndex","_ref4","allChunks","append","forEach","chunk","string","replace","HighlightWords","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_on","_on2","_on3","_on4","_states","IDLE","SUGGESTING","NAVIGATING","INTERACTING","CLEAR","CHANGE","INITIAL_CHANGE","NAVIGATE","SELECT_WITH_KEYBOARD","SELECT_WITH_CLICK","ESCAPE","BLUR","INTERACT","FOCUS","OPEN_WITH_BUTTON","OPEN_WITH_INPUT_CLICK","CLOSE_WITH_BUTTON","stateChart","initial","states","on","reducer","data","event","nextState","lastEventType","type","navigationValue","value","findNavigationValue","isControlled","popoverIsExpanded","state","includes","stateData","persistSelection","ComboboxDescendantContext","ComboboxContext","OptionContext","Combobox","forwardedRef","_data$navigationValue","onSelect","_ref$openOnFocus","openOnFocus","children","_ref$as","as","Comp","ariaLabel","ariaLabelledby","props","_useDescendantsInit","options","setOptions","inputRef","popoverRef","buttonRef","autocompletePropRef","persistSelectionRef","defaultData","_useReducerMachine","useReducerMachine","transition","useFocusManagement","id","listboxId","isControlledRef","isExpanded","context","comboboxId","items","set","Provider","getDataState","undefined","ref","process","env","NODE_ENV","displayName","propTypes","any","func","bool","ComboboxInput","_ref2$as","_ref2$selectOnClick","selectOnClick","_ref2$autocomplete","autocomplete","onClick","onChange","onKeyDown","onBlur","onFocus","controlledValue","_React$useRef","initialControlledValue","current","controlledValueChangedRef","_React$useContext","_React$useContext$dat","selectOnClickRef","handleKeyDown","useKeyDown","handleBlur","useBlur","wasInitiallyControlled","handleValueChange","trim","handleChange","handleFocus","handleClick","_inputRef$current","select","inputValue","String","makeHash","role","ComboboxPopover","_ref3$as","_ref3$portal","portal","_ref3$position","position","_React$useContext2","sharedProps","hidden","tabIndex","targetRef","unstable_skipInitialPortalRender","ComboboxList","_ref4$persistSelectio","_ref4$as","_React$useContext3","ComboboxOption","_ref5","_ref5$as","indexProp","_React$useContext4","ownRef","_useStatefulRefValue","element","handleRefSet","descendant","isActive","ComboboxOptionText","_React$useContext5","_React$useContext6","contextValue","results","escapeRegexp","split","map","result","str","slice","ComboboxButton","_ref6","_ref6$as","_React$useContext7","_inputRef$current2","focus","_React$useContext8","findIndex","_ref7","getNextOption","atBottom","getFirstOption","getPreviousOption","atTop","getLastOption","preventDefault","next","prev","_React$useContext9","popover","input","button","activeElement","relatedTarget","contains","chart","initialData","_React$useState","setState","_React$useReducer","dispatch","payload","currentState","hash","_char","charCodeAt","toLowerCase","useComboboxContext","_React$useContext10","useComboboxOptionContext","_React$useContext11","unstable_useKeyDown"],"mappings":"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","sourcesContent":["import { forwardRef, useRef, createElement, useContext, useEffect, useCallback, useMemo, Fragment, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\nimport { createNamedContext } from '@reach/utils/context';\nimport { isFunction } from '@reach/utils/type-check';\nimport { makeId } from '@reach/utils/make-id';\nimport { noop } from '@reach/utils/noop';\nimport { useCheckStyles } from '@reach/utils/dev-utils';\nimport { useComposedRefs } from '@reach/utils/compose-refs';\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\nimport { useStatefulRefValue } from '@reach/utils/use-stateful-ref-value';\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\nimport { useId } from '@reach/auto-id';\nimport { Popover, positionMatchWidth } from '@reach/popover';\nimport warning from 'tiny-warning';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n// Forked from https://github.com/bvaughn/highlight-words-core\n\n/**\n * Creates an array of chunk objects representing both higlightable and non\n * highlightable pieces of text that match each search word.\n *\n * @return Array of \"chunk\" objects\n */\nfunction findAll(_ref) {\n  var autoEscape = _ref.autoEscape,\n      _ref$caseSensitive = _ref.caseSensitive,\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n      _ref$findChunks = _ref.findChunks,\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\n      sanitize = _ref.sanitize,\n      searchWords = _ref.searchWords,\n      textToHighlight = _ref.textToHighlight;\n  return fillInChunks({\n    chunksToHighlight: combineChunks({\n      chunks: findChunks({\n        autoEscape: autoEscape,\n        caseSensitive: caseSensitive,\n        sanitize: sanitize,\n        searchWords: searchWords,\n        textToHighlight: textToHighlight\n      })\n    }),\n    totalLength: textToHighlight ? textToHighlight.length : 0\n  });\n}\n/**\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\n * single chunks.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction combineChunks(_ref2) {\n  var chunks = _ref2.chunks;\n  return chunks.sort(function (first, second) {\n    return first.start - second.start;\n  }).reduce(function (processedChunks, nextChunk) {\n    // First chunk just goes straight in the array...\n    if (processedChunks.length === 0) {\n      return [nextChunk];\n    } else {\n      // ... subsequent chunks get checked to see if they overlap...\n      var prevChunk = processedChunks.pop();\n\n      if (nextChunk.start <= prevChunk.end) {\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n        // largest of the end indeces.\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n        processedChunks.push({\n          highlight: false,\n          start: prevChunk.start,\n          end: endIndex\n        });\n      } else {\n        processedChunks.push(prevChunk, nextChunk);\n      }\n\n      return processedChunks;\n    }\n  }, []);\n}\n/**\n * Examine text for any matches. If we find matches, add them to the returned\n * array as a \"chunk\" object.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction defaultFindChunks(_ref3) {\n  var autoEscape = _ref3.autoEscape,\n      caseSensitive = _ref3.caseSensitive,\n      _ref3$sanitize = _ref3.sanitize,\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\n      searchWords = _ref3.searchWords,\n      textToHighlight = _ref3.textToHighlight;\n  textToHighlight = sanitize(textToHighlight || \"\");\n  return searchWords.filter(function (searchWord) {\n    return searchWord;\n  }) // Remove empty words\n  .reduce(function (chunks, searchWord) {\n    searchWord = sanitize(searchWord);\n\n    if (autoEscape) {\n      searchWord = escapeRegExpFn(searchWord);\n    }\n\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\n    var match;\n\n    while (match = regex.exec(textToHighlight || \"\")) {\n      var start = match.index;\n      var end = regex.lastIndex; // We do not return zero-length matches\n\n      if (end > start) {\n        chunks.push({\n          highlight: false,\n          start: start,\n          end: end\n        });\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\n\n      if (match.index === regex.lastIndex) {\n        regex.lastIndex++;\n      }\n    }\n\n    return chunks;\n  }, []);\n}\n/**\n * Given a set of chunks to highlight, create an additional set of chunks\n * to represent the bits of text between the highlighted text.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction fillInChunks(_ref4) {\n  var chunksToHighlight = _ref4.chunksToHighlight,\n      totalLength = _ref4.totalLength;\n  var allChunks = [];\n\n  if (chunksToHighlight.length === 0) {\n    append(0, totalLength, false);\n  } else {\n    var lastIndex = 0;\n    chunksToHighlight.forEach(function (chunk) {\n      append(lastIndex, chunk.start, false);\n      append(chunk.start, chunk.end, true);\n      lastIndex = chunk.end;\n    });\n    append(lastIndex, totalLength, false);\n  }\n\n  return allChunks;\n\n  function append(start, end, highlight) {\n    if (end - start > 0) {\n      allChunks.push({\n        start: start,\n        end: end,\n        highlight: highlight\n      });\n    }\n  }\n}\n\nfunction defaultSanitize(string) {\n  return string;\n}\n\nfunction escapeRegExpFn(string) {\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\nvar HighlightWords = {\n  combineChunks: combineChunks,\n  fillInChunks: fillInChunks,\n  findAll: findAll,\n  findChunks: defaultFindChunks\n};\n\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\n    _excluded4 = [\"persistSelection\", \"as\"],\n    _excluded5 = [\"as\", \"children\", \"index\", \"value\", \"onClick\"],\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\n\nvar _on, _on2, _on3, _on4, _states;\n// States\n// Nothing going on, waiting for the user to type or use the arrow keys\n\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\n\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\n\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\n// are not ComboboxInputs\n\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\n// Events\n// User cleared the value w/ backspace, but input still has focus\n\nvar CLEAR = \"CLEAR\"; // User is typing\n\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\n// Prevents initial change from sending the user to the NAVIGATING state\n// https://github.com/reach/reach-ui/issues/464\n\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\n\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\n// value from the click, not the current nav item\n\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\n\nvar ESCAPE = \"ESCAPE\";\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\n\nvar INTERACT = \"INTERACT\";\nvar FOCUS = \"FOCUS\";\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar stateChart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\n  }, _states[SUGGESTING] = {\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\n  }, _states[NAVIGATING] = {\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\n  }, _states[INTERACTING] = {\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\n  }, _states)\n};\n\nvar reducer = function reducer(data, event) {\n  var nextState = _extends({}, data, {\n    lastEventType: event.type\n  });\n\n  switch (event.type) {\n    case CHANGE:\n    case INITIAL_CHANGE:\n      return _extends({}, nextState, {\n        navigationValue: null,\n        value: event.value\n      });\n\n    case NAVIGATE:\n    case OPEN_WITH_BUTTON:\n    case OPEN_WITH_INPUT_CLICK:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    case CLEAR:\n      return _extends({}, nextState, {\n        value: \"\",\n        navigationValue: null\n      });\n\n    case BLUR:\n    case ESCAPE:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case SELECT_WITH_CLICK:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : event.value,\n        navigationValue: null\n      });\n\n    case SELECT_WITH_KEYBOARD:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : data.navigationValue,\n        navigationValue: null\n      });\n\n    case CLOSE_WITH_BUTTON:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case INTERACT:\n      return nextState;\n\n    case FOCUS:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    default:\n      return nextState;\n  }\n};\n\nfunction popoverIsExpanded(state) {\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\n}\n/**\n * When we open a list, set the navigation value to the value in the input, if\n * it's in the list, then it'll automatically be highlighted.\n *\n * @param stateData\n * @param event\n */\n\n\nfunction findNavigationValue(stateData, event) {\n  // @ts-ignore\n  if (event.value) {\n    // @ts-ignore\n    return event.value; // @ts-ignore\n  } else if (event.persistSelection) {\n    return stateData.value;\n  } else {\n    return null;\n  }\n}\n\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\n// can work it's highlight text magic no matter what else is rendered around\n// it.\n\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Combobox\n *\n * @see Docs https://reach.tech/combobox#combobox\n */\n\nvar Combobox = /*#__PURE__*/forwardRef(function (_ref, forwardedRef) {\n  var _data$navigationValue;\n\n  var onSelect = _ref.onSelect,\n      _ref$openOnFocus = _ref.openOnFocus,\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\n      ariaLabel = _ref[\"aria-label\"],\n      ariaLabelledby = _ref[\"aria-labelledby\"],\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useDescendantsInit = useDescendantsInit(),\n      options = _useDescendantsInit[0],\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\n\n\n  var inputRef = useRef();\n  var popoverRef = useRef();\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\n  // the user's value while navigating (because it's always the user's value),\n  // but we need to know this in useKeyDown which is far away from the prop\n  // here, so we do something sneaky and write it to this ref on context so we\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\n  // about this one too!\n\n  var autocompletePropRef = useRef(false);\n  var persistSelectionRef = useRef(false);\n  var defaultData = {\n    // The value the user has typed. We derive this also when the developer is\n    // controlling the value of ComboboxInput.\n    value: \"\",\n    // the value the user has navigated to with the keyboard\n    navigationValue: null\n  };\n\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\n      state = _useReducerMachine[0],\n      data = _useReducerMachine[1],\n      transition = _useReducerMachine[2];\n\n  useFocusManagement(data.lastEventType, inputRef);\n  var id = useId(props.id);\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\n  var isControlledRef = useRef(false);\n  var isExpanded = popoverIsExpanded(state);\n  var context = {\n    ariaLabel: ariaLabel,\n    ariaLabelledby: ariaLabelledby,\n    autocompletePropRef: autocompletePropRef,\n    buttonRef: buttonRef,\n    comboboxId: id,\n    data: data,\n    inputRef: inputRef,\n    isExpanded: isExpanded,\n    listboxId: listboxId,\n    onSelect: onSelect || noop,\n    openOnFocus: openOnFocus,\n    persistSelectionRef: persistSelectionRef,\n    popoverRef: popoverRef,\n    state: state,\n    transition: transition,\n    isControlledRef: isControlledRef\n  };\n  useCheckStyles(\"combobox\");\n  return /*#__PURE__*/createElement(DescendantProvider, {\n    context: ComboboxDescendantContext,\n    items: options,\n    set: setOptions\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\n    value: context\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\n    \"data-reach-combobox\": \"\",\n    \"data-state\": getDataState(state),\n    \"data-expanded\": isExpanded || undefined,\n    ref: forwardedRef\n  }), isFunction(children) ? children({\n    id: id,\n    isExpanded: isExpanded,\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\n    state: state\n  }) : children)));\n});\n/**\n * @see Docs https://reach.tech/combobox#combobox-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  Combobox.displayName = \"Combobox\";\n  Combobox.propTypes = {\n    as: PropTypes.any,\n    onSelect: PropTypes.func,\n    openOnFocus: PropTypes.bool\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxInput\n *\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxinput\n */\n\n\nvar ComboboxInput = /*#__PURE__*/forwardRef(function (_ref2, forwardedRef) {\n  var _ref2$as = _ref2.as,\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\n      _ref2$selectOnClick = _ref2.selectOnClick,\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\n      _ref2$autocomplete = _ref2.autocomplete,\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\n      onClick = _ref2.onClick,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onBlur = _ref2.onBlur,\n      onFocus = _ref2.onFocus,\n      controlledValue = _ref2.value,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n\n  // https://github.com/reach/reach-ui/issues/464\n  var _React$useRef = useRef(controlledValue),\n      initialControlledValue = _React$useRef.current;\n\n  var controlledValueChangedRef = useRef(false);\n  useUpdateEffect(function () {\n    controlledValueChangedRef.current = true;\n  }, [controlledValue]);\n\n  var _React$useContext = useContext(ComboboxContext),\n      _React$useContext$dat = _React$useContext.data,\n      navigationValue = _React$useContext$dat.navigationValue,\n      value = _React$useContext$dat.value,\n      lastEventType = _React$useContext$dat.lastEventType,\n      inputRef = _React$useContext.inputRef,\n      state = _React$useContext.state,\n      transition = _React$useContext.transition,\n      listboxId = _React$useContext.listboxId,\n      autocompletePropRef = _React$useContext.autocompletePropRef,\n      openOnFocus = _React$useContext.openOnFocus,\n      isExpanded = _React$useContext.isExpanded,\n      ariaLabel = _React$useContext.ariaLabel,\n      ariaLabelledby = _React$useContext.ariaLabelledby,\n      persistSelectionRef = _React$useContext.persistSelectionRef,\n      isControlledRef = _React$useContext.isControlledRef;\n\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\n  // caused by clicking inside the list, and if so, don't close the List.\n\n  var selectOnClickRef = useRef(false);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var isControlled = typeof controlledValue !== \"undefined\";\n  var wasInitiallyControlled = typeof initialControlledValue !== \"undefined\";\n\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? warning(!(!isControlled && wasInitiallyControlled), \"ComboboxInput is changing from controlled to uncontrolled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(isControlled && !wasInitiallyControlled), \"ComboboxInput is changing from uncontrolled to controlled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n  }\n\n  useEffect(function () {\n    isControlledRef.current = isControlled; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isControlled]); // Layout effect should be SSR-safe here because we don't actually do\n  // anything with this ref that involves rendering until after we've\n  // let the client hydrate in nested components.\n\n  useIsomorphicLayoutEffect(function () {\n    autocompletePropRef.current = autocomplete;\n  }, [autocomplete, autocompletePropRef]);\n  var handleValueChange = useCallback(function (value) {\n    if (value.trim() === \"\") {\n      transition(CLEAR, {\n        isControlled: isControlled\n      });\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\n      transition(INITIAL_CHANGE, {\n        value: value\n      });\n    } else {\n      transition(CHANGE, {\n        value: value\n      });\n    }\n  }, [initialControlledValue, transition, isControlled]);\n  useEffect(function () {\n    // If they are controlling the value we still need to do our transitions,\n    // so  we have this derived state to emulate onChange of the input as we\n    // receive new `value`s ...[*]\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\n      handleValueChange(controlledValue);\n    }\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\n  // user types, instead the developer controls it with the normal input\n  // onChange prop\n\n  function handleChange(event) {\n    var value = event.target.value;\n\n    if (!isControlled) {\n      handleValueChange(value);\n    }\n  }\n\n  function handleFocus() {\n    if (selectOnClick) {\n      selectOnClickRef.current = true;\n    } // If we select an option with click, useFocusManagement will focus the\n    // input, in those cases we don't want to cause the menu to open back up,\n    // so we guard behind these states.\n\n\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\n      transition(FOCUS, {\n        persistSelection: persistSelectionRef.current\n      });\n    }\n  }\n\n  function handleClick() {\n    if (selectOnClickRef.current) {\n      var _inputRef$current;\n\n      selectOnClickRef.current = false;\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\n    }\n\n    if (openOnFocus && state === IDLE) {\n      transition(OPEN_WITH_INPUT_CLICK);\n    }\n  }\n\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\n  navigationValue || controlledValue || value : controlledValue || value;\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\n    \"aria-autocomplete\": \"both\",\n    \"aria-controls\": listboxId,\n    \"aria-expanded\": isExpanded,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\n    role: \"combobox\"\n  }, props, {\n    \"data-reach-combobox-input\": \"\",\n    \"data-state\": getDataState(state),\n    ref: ref,\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    onChange: composeEventHandlers(onChange, handleChange),\n    onClick: composeEventHandlers(onClick, handleClick),\n    onFocus: composeEventHandlers(onFocus, handleFocus),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    value: inputValue || \"\"\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxinput-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxInput.displayName = \"ComboboxInput\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxPopover\n *\n * Contains the popup that renders the list. Because some UI needs to render\n * more than the list in the popup, you need to render one of these around the\n * list. For example, maybe you want to render the number of results suggested.\n *\n * @see Docs https://reach.tech/combobox#comboboxpopover\n */\n\n\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function (_ref3, forwardedRef) {\n  var _ref3$as = _ref3.as,\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\n      children = _ref3.children,\n      _ref3$portal = _ref3.portal,\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\n      onKeyDown = _ref3.onKeyDown,\n      onBlur = _ref3.onBlur,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  var _React$useContext2 = useContext(ComboboxContext),\n      popoverRef = _React$useContext2.popoverRef,\n      inputRef = _React$useContext2.inputRef,\n      isExpanded = _React$useContext2.isExpanded,\n      state = _React$useContext2.state;\n\n  var ref = useComposedRefs(popoverRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var sharedProps = {\n    \"data-reach-combobox-popover\": \"\",\n    \"data-state\": getDataState(state),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    // Instead of conditionally rendering the popover we use the `hidden` prop\n    // because we don't want to unmount on close (from escape or onSelect).\n    // However, the developer can conditionally render the ComboboxPopover if\n    // they do want to cause mount/unmount based on the app's own data (like\n    // results.length or whatever).\n    hidden: !isExpanded,\n    tabIndex: -1,\n    children: children\n  };\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\n    as: Comp\n  }, props, {\n    ref: ref,\n    \"data-expanded\": isExpanded || undefined,\n    position: position,\n    targetRef: inputRef,\n    unstable_skipInitialPortalRender: true\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\n    ref: ref\n  }, props, sharedProps));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxPopover.displayName = \"ComboboxPopover\";\n}\n/**\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\n */\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxList\n *\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\n * for the list.\n *\n * @see Docs https://reach.tech/combobox#comboboxlist\n */\nvar ComboboxList = /*#__PURE__*/forwardRef(function (_ref4, forwardedRef) {\n  var _ref4$persistSelectio = _ref4.persistSelection,\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\n      _ref4$as = _ref4.as,\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\n\n  var _React$useContext3 = useContext(ComboboxContext),\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\n      listboxId = _React$useContext3.listboxId;\n\n  if (persistSelection) {\n    persistSelectionRef.current = true;\n  }\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    role: \"listbox\"\n  }, props, {\n    ref: forwardedRef,\n    \"data-reach-combobox-list\": \"\",\n    id: listboxId\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxlist-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxList.displayName = \"ComboboxList\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOption\n *\n * An option that is suggested to the user as they interact with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxoption\n */\n\n\nvar ComboboxOption = /*#__PURE__*/forwardRef(function (_ref5, forwardedRef) {\n  var _ref5$as = _ref5.as,\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\n      children = _ref5.children,\n      indexProp = _ref5.index,\n      value = _ref5.value,\n      onClick = _ref5.onClick,\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\n\n  var _React$useContext4 = useContext(ComboboxContext),\n      onSelect = _React$useContext4.onSelect,\n      navigationValue = _React$useContext4.data.navigationValue,\n      transition = _React$useContext4.transition,\n      isControlledRef = _React$useContext4.isControlledRef;\n\n  var ownRef = useRef(null);\n\n  var _useStatefulRefValue = useStatefulRefValue(ownRef, null),\n      element = _useStatefulRefValue[0],\n      handleRefSet = _useStatefulRefValue[1];\n\n  var descendant = useMemo(function () {\n    return {\n      element: element,\n      value: value\n    };\n  }, [value, element]);\n  var index = useDescendant(descendant, ComboboxDescendantContext, indexProp);\n  var ref = useComposedRefs(forwardedRef, handleRefSet);\n  var isActive = navigationValue === value;\n\n  var handleClick = function handleClick() {\n    onSelect && onSelect(value);\n    transition(SELECT_WITH_CLICK, {\n      value: value,\n      isControlled: isControlledRef.current\n    });\n  };\n\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\n    value: {\n      value: value,\n      index: index\n    }\n  }, /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-selected\": isActive,\n    role: \"option\"\n  }, props, {\n    \"data-reach-combobox-option\": \"\",\n    ref: ref,\n    id: String(makeHash(value)),\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\n    // element can be `document.activeElement` and then our focus checks in\n    // onBlur will work as intended\n    ,\n    tabIndex: -1,\n    onClick: composeEventHandlers(onClick, handleClick)\n  }), children ? isFunction(children) ? children({\n    value: value,\n    index: index\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxoption-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOption.displayName = \"ComboboxOption\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOptionText\n *\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\n * matching and non-matching segments of text.\n *\n * We don't forwardRef or spread props because we render multiple spans or null,\n * should be fine 🤙\n *\n * @example\n *   <ComboboxOption value=\"Seattle\">\n *     🌧 <ComboboxOptionText />\n *   </ComboboxOption>\n *\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\n */\n\n\nfunction ComboboxOptionText() {\n  var _React$useContext5 = useContext(OptionContext),\n      value = _React$useContext5.value;\n\n  var _React$useContext6 = useContext(ComboboxContext),\n      contextValue = _React$useContext6.data.value;\n\n  var results = useMemo(function () {\n    return HighlightWords.findAll({\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\n      textToHighlight: value\n    });\n  }, [contextValue, value]);\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\n    var str = value.slice(result.start, result.end);\n    return /*#__PURE__*/createElement(\"span\", {\n      key: index,\n      \"data-reach-combobox-option-text\": \"\",\n      \"data-user-value\": result.highlight ? true : undefined,\n      \"data-suggested-value\": result.highlight ? undefined : true\n    }, str);\n  }) : value);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxButton\n */\n\n\nvar ComboboxButton = /*#__PURE__*/forwardRef(function (_ref6, forwardedRef) {\n  var _ref6$as = _ref6.as,\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\n      onClick = _ref6.onClick,\n      onKeyDown = _ref6.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\n\n  var _React$useContext7 = useContext(ComboboxContext),\n      transition = _React$useContext7.transition,\n      state = _React$useContext7.state,\n      buttonRef = _React$useContext7.buttonRef,\n      listboxId = _React$useContext7.listboxId,\n      isExpanded = _React$useContext7.isExpanded;\n\n  var ref = useComposedRefs(buttonRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n\n  var handleClick = function handleClick() {\n    if (state === IDLE) {\n      transition(OPEN_WITH_BUTTON);\n    } else {\n      transition(CLOSE_WITH_BUTTON);\n    }\n  };\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-controls\": listboxId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-expanded\": isExpanded\n  }, props, {\n    \"data-reach-combobox-button\": \"\",\n    ref: ref,\n    onClick: composeEventHandlers(onClick, handleClick),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\n  }));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxButton.displayName = \"ComboboxButton\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Move focus back to the input if we start navigating w/ the\n * keyboard after focus has moved to any focusable content in\n * the popup.\n *\n * @param lastEventType\n * @param inputRef\n */\n\n\nfunction useFocusManagement(lastEventType, inputRef) {\n  // useLayoutEffect so that the cursor goes to the end of the input instead\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\n  //\n  // Should be safe to use here since we're just focusing an input.\n  useIsomorphicLayoutEffect(function () {\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\n    }\n  }, [inputRef, lastEventType]);\n}\n/**\n * We want the same events when the input or the popup have focus (HOW COOL ARE\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\n */\n\n\nfunction useKeyDown() {\n  var _React$useContext8 = useContext(ComboboxContext),\n      navigationValue = _React$useContext8.data.navigationValue,\n      onSelect = _React$useContext8.onSelect,\n      state = _React$useContext8.state,\n      transition = _React$useContext8.transition,\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\n      persistSelectionRef = _React$useContext8.persistSelectionRef,\n      isControlledRef = _React$useContext8.isControlledRef;\n\n  var options = useDescendants(ComboboxDescendantContext);\n  return function handleKeyDown(event) {\n    var index = options.findIndex(function (_ref7) {\n      var value = _ref7.value;\n      return value === navigationValue;\n    });\n\n    function getNextOption() {\n      var atBottom = index === options.length - 1;\n\n      if (atBottom) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getFirstOption();\n        }\n      } else {\n        // Go to the next item in the list\n        return options[(index + 1) % options.length];\n      }\n    }\n\n    function getPreviousOption() {\n      var atTop = index === 0;\n\n      if (atTop) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getLastOption();\n        }\n      } else if (index === -1) {\n        // displaying the user's value, so go select the last one\n        return getLastOption();\n      } else {\n        // normal case, select previous\n        return options[(index - 1 + options.length) % options.length];\n      }\n    }\n\n    function getFirstOption() {\n      return options[0];\n    }\n\n    function getLastOption() {\n      return options[options.length - 1];\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || !options.length) {\n          return;\n        }\n\n        if (state === IDLE) {\n          // Opening a closed list\n          transition(NAVIGATE, {\n            persistSelection: persistSelectionRef.current\n          });\n        } else {\n          var next = getNextOption();\n          transition(NAVIGATE, {\n            value: next ? next.value : null\n          });\n        }\n\n        break;\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\n\n      case \"ArrowUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          var prev = getPreviousOption();\n          transition(NAVIGATE, {\n            value: prev ? prev.value : null\n          });\n        }\n\n        break;\n\n      case \"Home\":\n      case \"PageUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getFirstOption().value\n          });\n        }\n\n        break;\n\n      case \"End\":\n      case \"PageDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getLastOption().value\n          });\n        }\n\n        break;\n\n      case \"Escape\":\n        if (state !== IDLE) {\n          transition(ESCAPE);\n        }\n\n        break;\n\n      case \"Enter\":\n        if (state === NAVIGATING && navigationValue !== null) {\n          // don't want to submit forms\n          event.preventDefault();\n          onSelect && onSelect(navigationValue);\n          transition(SELECT_WITH_KEYBOARD, {\n            isControlled: isControlledRef.current\n          });\n        }\n\n        break;\n    }\n  };\n}\n\nfunction useBlur() {\n  var _React$useContext9 = useContext(ComboboxContext),\n      state = _React$useContext9.state,\n      transition = _React$useContext9.transition,\n      popoverRef = _React$useContext9.popoverRef,\n      inputRef = _React$useContext9.inputRef,\n      buttonRef = _React$useContext9.buttonRef;\n\n  return function handleBlur(event) {\n    var popover = popoverRef.current;\n    var input = inputRef.current;\n    var button = buttonRef.current;\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\n\n    if (activeElement !== input && activeElement !== button && popover) {\n      if (popover.contains(activeElement)) {\n        // focus landed inside the combobox, keep it open\n        if (state !== INTERACTING) {\n          transition(INTERACT);\n        }\n      } else {\n        // focus landed outside the combobox, close it.\n        transition(BLUR);\n      }\n    }\n  };\n}\n/**\n * This manages transitions between states with a built in reducer to manage\n * the data that goes with those transitions.\n *\n * @param chart\n * @param reducer\n * @param initialData\n */\n\n\nfunction useReducerMachine(chart, reducer, initialData) {\n  var _React$useState = useState(chart.initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var _React$useReducer = useReducer(reducer, initialData),\n      data = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var transition = function transition(event, payload) {\n    if (payload === void 0) {\n      payload = {};\n    }\n\n    var currentState = chart.states[state];\n    var nextState = currentState && currentState.on[event];\n\n    if (nextState) {\n      dispatch(_extends({\n        type: event,\n        state: state,\n        nextState: state\n      }, payload));\n      setState(nextState);\n      return;\n    }\n  };\n\n  return [state, data, transition];\n}\n/**\n * We don't want to track the active descendant with indexes because nothing is\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\n * ENTER. That only happens if you use the index as your data, rather than\n * *your data as your data*. We use this to generate a unique ID based on the\n * value of each item.  This function is short, sweet, and good enough™ (I also\n * don't know how it works, tbqh)\n *\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\n * @param str\n */\n\n\nfunction makeHash(str) {\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash = hash & hash;\n  }\n\n  return hash;\n} // function getActiveElement(node: Element | null | undefined) {\n//   let activeElement: Element | null = null;\n//   try {\n//     // If Element.getRootNode is supported, we'll retrieve either the root\n//     // Document or shadow root depending on where the component is rendered.\n//     // https://github.com/reach/reach-ui/issues/787\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\n//       .activeElement;\n//   } finally {\n//     return activeElement || (node?.ownerDocument || document).activeElement;\n//   }\n// }\n\n\nfunction getDataState(state) {\n  return state.toLowerCase();\n}\n/**\n * Escape regexp special characters in `str`\n *\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\n * @param str\n */\n\n\nfunction escapeRegexp(str) {\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\n} //////////////////////////\n//////////////////////////////////////////////////////\n\n/**\n * A hook that exposes data for a given `Combobox` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\nfunction useComboboxContext() {\n  var _React$useContext10 = useContext(ComboboxContext),\n      isExpanded = _React$useContext10.isExpanded,\n      comboboxId = _React$useContext10.comboboxId,\n      data = _React$useContext10.data,\n      state = _React$useContext10.state;\n\n  var navigationValue = data.navigationValue;\n  return useMemo(function () {\n    return {\n      id: comboboxId,\n      isExpanded: isExpanded,\n      navigationValue: navigationValue != null ? navigationValue : null,\n      state: state\n    };\n  }, [comboboxId, isExpanded, navigationValue, state]);\n}\n/**\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\nfunction useComboboxOptionContext() {\n  var _React$useContext11 = useContext(OptionContext),\n      value = _React$useContext11.value,\n      index = _React$useContext11.index;\n\n  return useMemo(function () {\n    return {\n      value: value,\n      index: index\n    };\n  }, [value, index]);\n} ////////////////////////////////////////////////////////////////////////////////\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\n// what the heck?). Have a great day :D\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useKeyDown as unstable_useKeyDown, useComboboxContext, useComboboxOptionContext };\n"]},"metadata":{},"sourceType":"module"}